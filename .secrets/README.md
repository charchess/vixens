# .secrets/

This directory contains sensitive configuration files that are **NOT committed to Git**.

## Contents

### Per-environment directories (dev, prod)

Each environment contains:
- `kubeconfig-<env>` - Kubernetes cluster access config (generated by Terraform in terravixens)
- `talosconfig-<env>` - Talos cluster access config (generated by Terraform in terravixens)
- `infisical-universal-auth.yaml` - Infisical authentication secret (for ArgoCD)
- `infisical-secrets.yaml` - Additional Infisical configuration

## Source of Truth

**IMPORTANT:** The kubeconfig and talosconfig files are **generated by Terraform** in the terravixens repository.

They are **copied here** for convenience so that agents working on vixens can access the clusters.

**Source of truth:** `terravixens:terraform/environments/<env>/`

## Usage

```bash
# For dev environment
export KUBECONFIG=/root/vixens/.secrets/dev/kubeconfig-dev
export TALOSCONFIG=/root/vixens/.secrets/dev/talosconfig-dev

# For prod environment
export KUBECONFIG=/root/vixens/.secrets/prod/kubeconfig-prod
export TALOSCONFIG=/root/vixens/.secrets/prod/talosconfig-prod
```

## Regeneration

If cluster credentials change (after Terraform apply in terravixens), copy the updated files:

```bash
# From terravixens to vixens
cp terravixens:terraform/environments/dev/kubeconfig-dev \
   /root/vixens/.secrets/dev/

cp terravixens:terraform/environments/dev/talosconfig-dev \
   /root/vixens/.secrets/dev/

# Same for prod
cp terravixens:terraform/environments/prod/kubeconfig-prod \
   /root/vixens/.secrets/prod/

cp terravixens:terraform/environments/prod/talosconfig-prod \
   /root/vixens/.secrets/prod/
```

## Security

All files in this directory are in `.gitignore` and will never be committed.
