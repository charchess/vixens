#!/usr/bin/env sh
# Pre-commit hook for beads

if ! command -v bd >/dev/null 2>&1; then
    exit 0
fi

# Export to JSONL before commit
bd sync -q 2>/dev/null

# Stage the JSONL if it changed
if git diff --quiet .beads/issues.jsonl 2>/dev/null; then
    : # No changes
else
    git add .beads/issues.jsonl
fi

exec bd hook pre-commit "$@"
