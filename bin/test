#!/bin/bash

# Get the directory of the script and the project root
SCRIPT_DIR="$(cd "$(dirname "${BASH_SOURCE[0]}")" &> /dev/null && pwd)"
PROJECT_ROOT="$(dirname "$SCRIPT_DIR")"

# Add project root to PYTHONPATH to allow absolute imports
export PYTHONPATH="${PROJECT_ROOT}"

VENV_PYTHON="${PROJECT_ROOT}/scripts/.venv/bin/python"

# Check if the virtual environment's python is available
if [ ! -f "$VENV_PYTHON" ]; then
    echo "Error: Virtual environment python not found at $VENV_PYTHON."
    echo "Please run 'python3 -m venv scripts/.venv' to create it."
    exit 1
fi

# Execute the main python test runner, passing all arguments
"$VENV_PYTHON" "${PROJECT_ROOT}/scripts/run_tests.py" "$@"
