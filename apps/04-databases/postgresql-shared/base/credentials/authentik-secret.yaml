---
apiVersion: secrets.infisical.com/v1alpha1
kind: InfisicalSecret
metadata:
  name: authentik-postgresql-credentials
  namespace: databases
  annotations:
    argocd.argoproj.io/sync-wave: "1"
spec:
  hostAPI: http://192.168.111.69:8085
  resyncInterval: 60
  authentication:
    universalAuth:
      credentialsRef:
        secretName: infisical-universal-auth
        secretNamespace: argocd
      secretsScope:
        projectSlug: vixens
        envSlug: dev
        secretsPath: /apps/03-security/authentik
  managedSecretReference:
    secretName: authentik-postgresql-credentials
    creationPolicy: Owner
    secretNamespace: databases
  template:
    data:
      username: "{{ .POSTGRES_USER }}"
      password: "{{ .POSTGRES_PASSWORD }}"
      POSTGRES_USER: "{{ .POSTGRES_USER }}"
      POSTGRES_PASSWORD: "{{ .POSTGRES_PASSWORD }}"
      REDIS_PASSWORD: "{{ .REDIS_PASSWORD }}"
      SECRET_KEY: "{{ .SECRET_KEY }}"
