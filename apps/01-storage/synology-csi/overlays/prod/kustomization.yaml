---
apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization
components:
  - ../../../../_shared/patches
labels:
  - includeTemplates: true
    pairs:
      vixens.lab/environment: prod
namespace: synology-csi
patches:
  - path: ../../../../_shared/patches/revision-history-limit-statefulset.yaml
    target:
      kind: StatefulSet
  - path: ../../../../_shared/patches/revision-history-limit-deployment.yaml
    target:
      kind: Deployment
  - patch: |-
      - op: replace
        path: /parameters/igroup
        value: "vixens-prod-iscsi-group"
      - op: add
        path: /parameters/targetIps
        value: "192.168.111.70,192.168.111.71"
    target:
      kind: StorageClass
      name: synelia-iscsi-retain
  - patch: |-
      - op: add
        path: /parameters/igroup
        value: "vixens-prod-iscsi-group"
      - op: add
        path: /parameters/targetIps
        value: "192.168.111.70,192.168.111.71"
    target:
      kind: StorageClass
      name: synelia-iscsi-delete
resources:
  - ../../base
