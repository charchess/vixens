---
apiVersion: v1
kind: ConfigMap
metadata:
  name: renovate-config
  namespace: tools
data:
  config.json: |
    {
      "platform": "github",
      "username": "renovate-bot",
      "gitAuthor": "Renovate Bot <renovate@vixens.local>",
      "onboarding": false,
      "requireConfig": "optional",
      "repositories": ["charchess/vixens"],
      "baseBranchPatterns": ["dev"],
      "enabledManagers": ["terraform", "helm-values", "kubernetes", "regex"],
      "kubernetes": {
        "fileMatch": ["(^|/)kustomization\\.yaml$", "(^|/)[^/]*\\.yaml$"]
      },
      "helm-values": {
        "fileMatch": ["(^|/)values.*\\.yaml$"]
      },
      "terraform": {
        "fileMatch": ["(^|/)\\.tf$"]
      },
      "packageRules": [
        {
          "matchPackagePatterns": ["^lscr\\.io/linuxserver/"],
          "versioning": "regex:^version-v?(?<major>\\d+)\\.(?<minor>\\d+)\\.(?<patch>\\d+)(.*)?$"
        },
        {
          "matchPackageNames": ["lscr.io/linuxserver/lazylibrarian"],
          "versioning": "regex:^version-(?<major>[a-f0-9]+)$"
        },
        {
          "matchPackagePatterns": ["^ghcr\\.io/music-assistant/"],
          "versioning": "docker"
        },
        {
          "matchPackagePatterns": ["^adguard/adguardhome"],
          "versioning": "docker"
        },
        {
          "matchPackagePatterns": ["^ghcr\\.io/tphakala/birdnet-go"],
          "versioning": "regex:^nightly-(?<major>\\d+)$"
        }
      ],
      "prConcurrentLimit": 10,
      "prHourlyLimit": 0,
      "automerge": false,
      "ignoreTests": true,
      "labels": ["dependencies", "renovate"],
      "assignees": ["@charchess"],
      "reviewers": ["@charchess"],
      "schedule": ["at any time"]
    }
