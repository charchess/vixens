---
apiVersion: kustomize.config.k8s.io/v1beta1
commonLabels:
  environment: prod
kind: Kustomization
namespace: monitoring
patches:
  - path: ../../../../_shared/patches/revision-history-limit-statefulset.yaml
    target:
      kind: StatefulSet
  - path: ../../../../_shared/patches/revision-history-limit-deployment.yaml
    target:
      kind: Deployment
  - path: patch-alertmanager-command.yaml
    target:
      kind: StatefulSet
      name: prometheus-alertmanager
  - path: patch-infisical-env.yaml
    target:
      kind: InfisicalSecret
      name: prometheus-secrets-sync
  - path: patch-infisical-env.yaml
    target:
      kind: InfisicalSecret
      name: alertmanager-secrets-sync
resources:
  - ../../base
