---
# Common Traefik Helm values for all environments
# Based on terraform/modules/shared/locals.tf and current deployment
# Source: argocd/overlays/dev/apps/traefik.yaml

# ============================================================================
# Providers Configuration
# ============================================================================
providers:
  kubernetesCRD:
    enabled: true
  kubernetesIngress:
    enabled: true
    publishedService:
      enabled: true

# ============================================================================
# API and Dashboard
# ============================================================================
api:
  dashboard: true
  insecure: true  # Dashboard accessible on internal network

# Dashboard IngressRoute disabled - managed by traefik-dashboard app
ingressRoute:
  dashboard:
    enabled: false

# ============================================================================
# Control Plane Tolerations
# ============================================================================
# From terraform/modules/shared/locals.tf
tolerations:
  - key: "node-role.kubernetes.io/control-plane"
    operator: "Exists"
    effect: "NoSchedule"

# ============================================================================
# Entrypoints / Ports Configuration
# ============================================================================
ports:
  web:
    port: 80
    exposedPort: 80
    expose: true
  websecure:
    port: 443
    exposedPort: 443
    expose: true
    tls:
      enabled: true
  mqtt: # New entrypoint for Mosquitto
    port: 1883
    exposedPort: 1883
    expose: true
    protocol: TCP
  coiot: # New entrypoint for Home Assistant CoIoT (Shelly devices)
    port: 5683
    exposedPort: 5683
    expose: true
    protocol: UDP
  traefik:
    port: 9000
    expose: false
    exposedPort: 9000
