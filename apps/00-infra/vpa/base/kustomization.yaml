apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

helmCharts:
  - name: vertical-pod-autoscaler
    repo: https://cowboysysop.github.io/charts
    version: 9.0.2 # Pin version
    releaseName: vpa
    namespace: vpa
    valuesInline:
      admissionController:
        resources:
          requests:
            cpu: 50m
            memory: 100Mi
          limits:
            cpu: 200m
            memory: 500Mi
      recommender:
        extraArgs:
          # Goldilocks needs this
          vpa-recommendation-min-cpu: 10m
          vpa-recommendation-min-memory: 128Mi
        resources:
          requests:
            cpu: 50m
            memory: 250Mi
          limits:
            cpu: 200m
            memory: 1Gi
      updater:
        resources:
          requests:
            cpu: 50m
            memory: 100Mi
          limits:
            cpu: 200m
            memory: 500Mi

resources:
  - namespace.yaml
