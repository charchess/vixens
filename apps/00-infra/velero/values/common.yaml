# Velero - Final Stabilization 2026
image:
  repository: velero/velero
  tag: v1.17.2
  pullPolicy: IfNotPresent

configuration:
  uploaderType: kopia
  # Use ConfigMap for maintenance to avoid flag injection
  repoMaintenanceJobConfigMap: velero-repo-maintenance-config

# Disable chart-managed maintenance jobs to stop --keep-latest-maintenance-jobs
schedules: {}
maintenanceCronJob:
  enabled: false

# Force clean server start
extraArgs: []

initContainers:
  - name: velero-plugin-for-aws
    image: velero/velero-plugin-for-aws:v1.13.2
    imagePullPolicy: IfNotPresent
    volumeMounts:
      - mountPath: /target
        name: plugins

resources:
  requests:
    cpu: 100m
    memory: 256Mi
  limits:
    cpu: 500m
    memory: 512Mi

nodeAgent:
  enabled: true
  uploaderType: kopia
  resources:
    requests:
      cpu: 100m
      memory: 256Mi
    limits:
      cpu: 500m
      memory: 512Mi
  tolerations:
    - key: node-role.kubernetes.io/control-plane
      operator: Exists
      effect: NoSchedule

metrics:
  enabled: true

tolerations:
  - key: node-role.kubernetes.io/control-plane
    operator: Exists
    effect: NoSchedule

upgradeCRDs: false
cleanUpCRDs: false
