---
# ExternalDNS UniFi Configuration (Private/LAN)
provider: webhook
priorityClassName: vixens-high
logLevel: debug
image:
  registry: registry.k8s.io
  repository: external-dns/external-dns
  tag: v0.20.0
extraArgs:
  webhook-provider-url: http://localhost:8888
# Sidecar Webhook
sidecars:
  - name: unifi-webhook
    image: ghcr.io/kashalls/external-dns-unifi-webhook:v0.8.2
    ports:
      - containerPort: 8888
        name: webhook
    env:
      - name: UNIFI_HOST
        valueFrom:
          secretKeyRef:
            name: external-dns-unifi-secret
            key: UNIFI_HOST
      - name: UNIFI_USER
        valueFrom:
          secretKeyRef:
            name: external-dns-unifi-secret
            key: UNIFI_USER
      - name: UNIFI_PASS
        valueFrom:
          secretKeyRef:
            name: external-dns-unifi-secret
            key: UNIFI_PASS
      - name: LOG_LEVEL
        value: debug
      - name: UNIFI_SKIP_TLS_VERIFY
        value: "true"
    resources:
      requests:
        cpu: 50m
        memory: 64Mi
      limits:
        cpu: 50m
        memory: 64Mi
tolerations:
  - key: node-role.kubernetes.io/control-plane
    operator: Exists
    effect: NoSchedule
livenessProbe:
  enabled: false
readinessProbe:
  enabled: false
# Scope
policy: sync
sources:
  - ingress
