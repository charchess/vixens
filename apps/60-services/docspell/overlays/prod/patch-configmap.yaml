---
apiVersion: v1
kind: ConfigMap
metadata:
  name: docspell-restserver-config
data:
  config: |
    docspell.server {
      app-name = "Docspell"
      app-id = ${HOSTNAME}
      base-url = "https://docspell.truxonline.com"
      internal-url = "http://docspell-restserver:7880"

      logging {
        minimum-level = "Info"

        levels = {
          "docspell" = "Info"
        }
      }

      bind {
        address = "0.0.0.0"
        port = 7880
      }

      integration-endpoint {
        enabled = false
      }

      full-text-search {
        enabled = true
        backend = "postgresql"

        postgresql = {
          use-default-connection = true
        }
      }

      auth {
        server-secret = "docspell-secrets"
      }

      backend {
        jdbc {
          url = ${JDBC_URI}
          user = ${JDBC_USERNAME}
          password = ${JDBC_PASSWORD}
        }

        signup {
          mode = "open"
        }

        files {
        }
      }
    }
