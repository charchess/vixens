# base/external-synelia/manifests.yaml

# --- OBJET 1 : Le pointeur vers le service externe en HTTP ---
apiVersion: traefik.containo.us/v1alpha1
kind: TraefikService
metadata:
  name: synelia-http-service
  namespace: default
spec:
  loadBalancer:
    servers:
    - address: "192.168.204.69:5000" # La nouvelle adresse HTTP
---
# --- OBJET 2 : La route d'entrée standard ---
apiVersion: traefik.containo.us/v1alpha1
kind: IngressRoute
metadata:
  name: synelia-http-routes
  namespace: default
spec:
  entryPoints:
    - websecure
  routes:
  - match: Host(`mail.truxonline.com`, `contacts.truxonline.com`, `photos.truxonline.com`, `notes.truxonline.com`, `surveillance.truxonline.com`, `synelia.truxonline.com`)
    kind: Rule
    services:
      - name: synelia-http-service
        kind: TraefikService
  tls:
    # Traefik gère le certificat Let's Encrypt pour la connexion externe
    certResolver: letsencrypt-gandi-prod
    