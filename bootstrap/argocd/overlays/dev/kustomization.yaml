# bootstrap/argocd/overlays/dev/kustomization.yaml
apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

resources:
  - ../../base

labels:
  - pairs:
      environment: dev
    includeSelectors: false

patches:
  - patch: |-
      - op: add
        path: /spec/ports/0/nodePort
        value: 30081
    target:
      kind: Service
      name: argocd-server

---
# bootstrap/argocd/overlays/staging/kustomization.yaml
apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

resources:
  - ../../base

labels:
  - pairs:
      environment: staging
    includeSelectors: false

patches:
  - patch: |-
      - op: add
        path: /spec/ports/0/nodePort
        value: 30082
    target:
      kind: Service
      name: argocd-server

---
# bootstrap/argocd/overlays/prod/kustomization.yaml
apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

resources:
  - ../../base

labels:
  - pairs:
      environment: production
    includeSelectors: false

patches:
  - patch: |-
      - op: add
        path: /spec/ports/0/nodePort
        value: 30083
    target:
      kind: Service
      name: argocd-server
