# overlays/dev/metallb/kustomization.yaml
---
apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

resources:
  - ../../../base/metallb

patches:
  - target:
      kind: IPAddressPool
      name: default-pool-cluster
    patch: '[{"op": "replace", "path": "/spec/addresses", "value": ["192.168.208.240-192.168.208.249"]}]'

  - target:
      kind: IPAddressPool
      name: service-pool-cluster
    patch: '[{"op": "replace", "path": "/spec/addresses", "value": ["192.168.208.70-192.168.208.79"]}]'

  - target:
      kind: IPAddressPool
      name: default-pool-cluster
    patch: '[{"op": "add", "path": "/metadata/labels", "value": {"environment": "dev", "cluster": "vixens-dev"}}]'

  - target:
      kind: IPAddressPool
      name: service-pool-cluster
    patch: '[{"op": "add", "path": "/metadata/labels", "value": {"environment": "dev", "cluster": "vixens-dev"}}]'
