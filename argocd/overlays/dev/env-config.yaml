---
# Environment-specific configuration for dev
# Used by Kustomize replacements to inject values into app templates
# This ConfigMap is NOT deployed to the cluster - it's used at build time only
apiVersion: v1
kind: ConfigMap
metadata:
  name: env-config
  namespace: argocd
  annotations:
    kustomize.config.k8s.io/behavior: create
    description: "Environment configuration for dev - used at build time"
data:
  # ============================================================================
  # Environment Identification
  # ============================================================================
  environment: "dev"
  git_branch: "dev"
  cluster_name: "vixens-dev"

  # ============================================================================
  # Domain Configuration
  # ============================================================================
  domain_suffix: "dev"
  base_domain: "truxonline.com"
  full_domain: "dev.truxonline.com"

  # ============================================================================
  # Network Configuration - VLAN Services (208)
  # ============================================================================
  vlan_id: "208"
  vlan_subnet: "192.168.208.0/24"
  vlan_gateway: "192.168.208.1"

  # Internal VLAN (same for all environments)
  vlan_internal: "111"
  vlan_internal_subnet: "192.168.111.0/24"

  # ============================================================================
  # LoadBalancer IP Pools (Cilium L2 Announcements)
  # ============================================================================
  # Assigned pool: .70-.79 (static IPs for specific services)
  lb_pool_assigned_start: "192.168.208.70"
  lb_pool_assigned_end: "192.168.208.79"

  # Auto pool: .80-.89 (dynamic allocation by Cilium)
  lb_pool_auto_start: "192.168.208.80"
  lb_pool_auto_end: "192.168.208.89"

  # Full pool range
  lb_pool_start: "192.168.208.70"
  lb_pool_end: "192.168.208.89"

  # ============================================================================
  # Service LoadBalancer IPs (from assigned pool .70-.79)
  # ============================================================================
  traefik_lb_ip: "192.168.208.70"
  argocd_server_ip: "192.168.208.71"
  # Reserved for future services: .72-.79

  # ============================================================================
  # Cluster Configuration
  # ============================================================================
  # Kubernetes API VIP on VLAN 111
  cluster_vip: "192.168.111.160"
  cluster_endpoint: "https://192.168.111.160:6443"

  # ============================================================================
  # Control Plane Nodes (VLAN 111 IPs)
  # ============================================================================
  node_obsy_ip: "192.168.111.162"
  node_onyx_ip: "192.168.111.164"
  node_opale_ip: "192.168.111.163"

  # ============================================================================
  # Application-Specific Configuration
  # ============================================================================
  # Talos version
  talos_version: "v1.11.5"

  # Kubernetes version
  kubernetes_version: "v1.34.0"

  # Cilium version
  cilium_version: "v1.18.3"

  # ArgoCD version
  argocd_version: "v7.7.7"

  # ============================================================================
  # Resource Limits (VM-based environment)
  # ============================================================================
  resource_tier: "development"  # development | staging | production
